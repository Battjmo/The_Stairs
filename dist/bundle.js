!function(e){var t={};function i(s){if(t[s])return t[s].exports;var h=t[s]={i:s,l:!1,exports:{}};return e[s].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var h in e)i.d(s,h,function(t){return e[t]}.bind(null,h));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var s={randomNumber:(e,t)=>Math.floor(Math.random()*(t-e))+e,trim:e=>e.replace(/^\s+|\s+$/gm,""),rgbaToHex(e){var t=e.substring(e.indexOf("(")).split(","),i=parseInt(this.trim(t[0].substring(1)),10),s=parseInt(this.trim(t[1]),10),h=parseInt(this.trim(t[2]),10);return"#"+i.toString(16)+s.toString(16)+h.toString(16)},shuffle(e){let t=e.slice();for(let i=e.length-1;i>=0;i--){const e=Math.floor(Math.random()*(i+1));[t[i],t[e]]=[t[e],t[i]]}return t}};var h=["Huh, I did not see this coming.","I guess it's time we get to walking, eh comrade?","Sure. It's not like there's anything else going on down here.","Just everything being consumed in flames?","Yeah, that. At least this seems to be leading away from them.","Yeah. Let's fuckin' go."];var a=[{name:"Welcome",text:["Well Nige, looks like we've nowhere to go but up.","Yeah, it's getting pretty damn warm down here. Let's rock"],size:[100,100],played:!1},{name:"Ending",text:["Well Nige, looks like we've nowhere else to go.","WHAT THE FUCK?!","What the single fuck indeed.","*They reamin silent for a moment, starting over the edge*","So what do we do now? You got any food left?","Nah. You?","Nah",""],size:[200,200],played:!1},{name:"Dance",text:["Well Nige, looks like we've nowhere to go but up.","Yeah, it's getting pretty damn warm down here. Let's rock"],size:[200,100],played:!1},{name:"Food",text:["How much food ya got left?","Lemme check. *Takes off his backpack, rummages around inside* Two power bars, one bag of Oberto,\n        and most of a liter of water. You?","A bag of halloween candy, a bag of tortilla chips, and like half a two liter of coke.","Perfect fuel for walking up stairs huh?","Talking about it's not gonna make it any fucking better. Let's walk."],size:[100,200],played:!1}];var n=[[0,0,100,100],[0,0,200,200],[0,0,100,200],[0,0,200,100]];var l=class{constructor(e,t=0,i=0,h,n=a){this.context=e,this.textBox=h,this.xBound=900,this.yBound=500,this.pathSize=100,this.pathX=this.pathSize,this.pathY=this.pathSize,this.shuffle=s.shuffle.bind(this),this.pathStart=[t,i,100,100],this.path=this.pathGenerator2(),this.events=this.seedEvents(n),this.textBox.innerHTML=this.textSetter(),this.eventIndex=0}textSetter(e){return h[e]?h[e]:"That's all the text so far."}drawLevel(){this.context.beginPath();for(let e=0;e<this.path.length;e++)this.context.rect(this.path[e][0],this.path[e][1],this.pathSize,this.pathSize),this.context.fillStyle="rgb(224, 11, 64)",this.context.fill()}drawLevel2(){this.context.beginPath();for(let e=0;e<this.path.length;e++)this.context.rect(this.path[e][0],this.path[e][1],this.path[e][2],this.path[e][3]),this.context.fillStyle="rgb(224, 11, 64)",this.context.fill()}pathGenerator2(){let e=[this.pathStart];for(;e[e.length-1][0]+100<this.xBound&&e[e.length-1][1]+100<this.yBound;){let t=this.shuffle(n),i=this.validShape(e,t);(e=e.slice()).push(i)}return console.log(e),e}validShape(e,t){let i,h=0,a=t.slice(),n=0;for(;a[n];)e[e.length-1][0]+a[n][0]<0||e[e.length-1][1]+a[n][1]<0?a.splice(n,1):n++;i=1===s.randomNumber(0,2)?[e[e.length-1][0],e[e.length-1][1]+e[e.length-1][3],a[0][2],a[0][3]]:[e[e.length-1][0]+e[e.length-1][2],e[e.length-1][1],a[0][2],a[0][3]];for(let t=0;t<e.length;t++)return e[t][0]===i[0]&&e[t][1]===i[1]&&(h+=1,i=[e[e.length-1][0]+a[h][0],e[e.length-1][1]+a[h][1]]),i}pathGenerator(){let e=[this.pathStart],t=[[0,this.pathSize],[this.pathSize,0],[-this.pathSize,0],[0,-this.pathSize]];for(;e[e.length-1][0]+100<this.xBound&&e[e.length-1][1]+100<this.yBound;){let i=this.shuffle(t),s=this.validMove(e,i);(e=e.slice()).push(s)}return console.log(e),e}validMove(e,t){let i=t.slice(),s=0,h=0;for(;i[h];)e[e.length-1][0]+i[h][0]<0||e[e.length-1][1]+i[h][1]<0?i.splice(h,1):h++;let a=[e[e.length-1][0]+i[0][0],e[e.length-1][1]+i[0][1]];for(let t=0;t<e.length;t++)return e[t][0]===a[0]&&e[t][1]===a[1]&&(s+=1,a=[e[e.length-1][0]+i[s][0],e[e.length-1][1]+i[s][1]]),a}seedEvents(e){const t=[];if(!1===e[0].played)return e[0].played=!0,e[0].size.unshift(0,0),t.push(e[0]),t;for(let i=0;i<this.path.length;i++)for(let h=0;h<e.length;h++)this.path[i][2]===e[h].size[0]&&this.path[i][3]===e[h].size[1]&&!1===e[h].played&&1===s.randomNumber(0,2)&&(e[h].size.unshift(this.path[i][0],this.path[i][1]),e[h].played=!0,t.push([e[h]]));return console.log(t),t}};var o=class{constructor(e,t,i){this.game=e,this.context=e.context,this.name=t,this.events=i,this.playerSize=10,this.playerX=0,this.playerY=0,this.playerSpeed=10,this.canMove=!0,this.playerMoveRight=!1,this.playerMoveLeft=!1,this.playerMoveUp=!1,this.playerMoveDown=!1}drawPlayer(){this.context.beginPath(),this.context.rect(this.playerX,this.playerY,this.playerSize,this.playerSize),this.context.fillStyle="#e1e1e1",this.context.fill()}bindKeys(){document.addEventListener("keydown",this.keyDownHandler.bind(this)),document.addEventListener("keyup",this.keyUpHandler.bind(this))}keyDownHandler(e){39!==e.keyCode&&68!==e.keyCode||(this.playerMoveRight=!0),37!==e.keyCode&&65!==e.keyCode||(this.playerMoveLeft=!0),38!==e.keyCode&&87!==e.keyCode||(this.playerMoveUp=!0),40!==e.keyCode&&83!==e.keyCode||(this.playerMoveDown=!0),32===e.keyCode&&this.game.level.eventIndex++}keyUpHandler(e){39!==e.keyCode&&68!==e.keyCode||(this.playerMoveRight=!1),37!==e.keyCode&&65!==e.keyCode||(this.playerMoveLeft=!1),38!==e.keyCode&&87!==e.keyCode||(this.playerMoveUp=!1),40!==e.keyCode&&83!==e.keyCode||(this.playerMoveDown=!1)}movePlayer(){for(let e=0;e<this.game.level.events.length;e++)this.game.level.events[e].size[0]<=this.playerX&&this.playerX<this.game.level.events[e].size[0]+this.game.level.events[e].size[2]&&this.game.level.events[e].size[1]<=this.playerY&&this.playerY<this.game.level.events[e].size[1]+this.game.level.events[e].size[3]&&this.triggerEvent(this.game.level.events[e]);this.canMove&&(this.playerMoveLeft&&this.playerX>0&&this.canMoveWest()?this.playerX-=this.playerSpeed:this.playerMoveRight&&this.playerX<this.game.canvasWidth-10&&this.canMoveEast()?this.playerX+=this.playerSpeed:this.playerMoveUp&&this.playerY>0&&this.canMoveNorth()?this.playerY-=this.playerSpeed:this.playerMoveDown&&this.playerY<this.game.canvasHeight-10&&this.canMoveSouth()&&(this.playerY+=this.playerSpeed))}moveCheck(e){return"224,11,64"===e}checkBoundary(e,t){return"right"===e&&t>=this.game.canvasWidth-10||"down"===e&&t>=this.game.canvasHeight-10}triggerEvent(e){if(console.log(this.game.level.eventIndex),this.game.level.eventIndex>=e.text.length)return console.log("in here"),this.canMove=!0,this.game.textBox.innerHTML="They walked on.",!1;this.canMove=!1,this.game.textBox.innerHTML=e.text[this.game.level.eventIndex]}canMoveEast(){this.checkBoundary("right",this.playerX+10)&&(this.playerX=0,this.playerY=100*Math.ceil(this.playerY/100),this.game.level=new l(this.context,0,this.playerY,this.textBox,this.events));let e=this.context.getImageData(this.playerX+10,this.playerY,1,1).data.slice(0,3).join(",");return this.moveCheck(e)}canMoveWest(){let e=this.context.getImageData(this.playerX-1,this.playerY,1,1).data.slice(0,3).join(",");return this.moveCheck(e)}canMoveSouth(){this.checkBoundary("down",this.playerY+10)&&(this.playerY=0,this.playerX=100*Math.ceil(this.playerX/100),this.game.level=new l(this.context,this.playerX,0,this.textBox,this.events));let e=this.context.getImageData(this.playerX,this.playerY+10,1,1).data.slice(0,3).join(",");return this.moveCheck(e)}canMoveNorth(){let e=this.context.getImageData(this.playerX,this.playerY-1,1,1).data.slice(0,3).join(",");return this.moveCheck(e)}};var r=class{constructor(e,t){this.context=e,this.textBox=t,this.canvasHeight=500,this.canvasWidth=900,this.player=new o(this,"Nigel",this.events),this.level=new l(this.context,0,0,this.textBox),this.noScroll=this.noScroll.bind(this),this.draw=this.draw.bind(this)}noScroll(){window.scrollTo(0,0)}draw(){this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.fillStyle="blue",this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.level.drawLevel2(),this.player.movePlayer(),this.player.drawPlayer(),requestAnimationFrame(this.draw)}play(){window.addEventListener("scroll",this.noScroll),this.player.bindKeys(),this.draw()}};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("game"),t=document.getElementById("text"),i=e.getContext("2d"),s=new r(i,t);e.height=s.canvasHeight,e.width=s.canvasWidth,s.play()})}]);
//# sourceMappingURL=bundle.js.map